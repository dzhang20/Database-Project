{% extends 'base.html' %}

{% block content %}


<!-- wrapper -->
    <div id="wrapper">
                <div class="content">
                    <!-- Map -->
{#                    <div class="map-container fw-map">#}
{#                        <div id="map-main"></div>#}
{#                        <ul class="mapnavigation">#}
{#                            <li><a href="#" class="prevmap-nav">Prev</a></li>#}
{#                            <li><a href="#" class="nextmap-nav">Next</a></li>#}
{#                        </ul>#}
{#                    </div>#}
                    <!-- Map end -->
                    <!-- section -->
                    <section class="gray-bg no-pading no-top-padding">
                        <div class="col-list-wrap fh-col-list-wrap  left-list">
                            <div class="container">
                                <div class="row">
                                    <div class="col-md-8">
                                        <div class="listsearch-header fl-wrap">
                                            <h3>Results : <span></span></h3>
                                            <div class="listing-view-layout">
                                                <ul>
                                                    <li><a class="grid active" href="#"><i class="fa fa-th-large"></i></a></li>
                                                    <li><a class="list" href="#"><i class="fa fa-list-ul"></i></a></li>
                                                </ul>
                                            </div>
                                        </div>
                                        <!-- list-main-wrap-->
                                        <div class="list-main-wrap fl-wrap card-listing">
                                            <!-- listing-item -->
                                            {% for events in searchevents.object_list %}

                                                <div class="listing-item">
                                                <article class="geodir-category-listing fl-wrap">
                                                    <div class="geodir-category-img">
                                                        <img src="/static/images/all/1.jpg" alt="">
                                                        <div class="overlay"></div>
                                                        <div class="list-post-counter"><span>4</span><i class="fa fa-heart"></i></div>
                                                    </div>
                                                    <div class="geodir-category-content fl-wrap">
                                                        <a class="listing-geodir-category" href="listing.html">{{ events.keyword }}</a>
                                                        <div class="listing-avatar"><a href="author-single.html"><img src="/static/images/avatar/1.jpg" alt=""></a>
                                                            <span class="avatar-tooltip">Added By  <strong>{{ events.founder }}</strong></span>
                                                        </div>
                                                        <h3><a href="listing-single.html">{{ events.name}}</a></h3>
                                                        <p>{{ events.description }}</p>
                                                        <div class="geodir-category-options fl-wrap">
                                                            <div class="listing-rating card-popup-rainingvis" data-starrating2="5">
                                                                <span>(7 reviews)</span>
                                                            </div>
                                                            <div class="geodir-category-location"><a href="#0" class="map-item scroll-top-map"><i class="fa fa-map-marker" aria-hidden="true"></i>{{ events.city }}</a></div>
                                                        </div>
                                                    </div>
                                                </article>
                                            </div>
                                            <!-- listing-item end-->
                                            {% endfor %}

                                            <!-- pagination-->

                                            <div class="pagination">

                                            {% if searchevents.has_previous %}

                                                    <a href="?{{ searchevents.previous_page_number.querystring }}" class="prevposts-link">previous
                                                    </a>

                                            {% endif %}

                                            {% for page in searchevents.pages %}

                                                {% if page %}
                                                    {% ifequal page searchevents.number %}
                                                        <a class="current-page" href="?{{ page.querystring }}">{{ page }}</a>
                                                    {% else %}
                                                        <a href="?{{ page.querystring }}">{{ page }}</a>
                                                    {% endifequal %}
                                                {% else %}
                                                    <a href="">...</a>

                                                {% endif %}

                                            {% endfor %}

                                            {% if searchevents.has_next %}
                                                     <a href="?{{ searchevents.next_page_number.querystring }}">next</a>
                                            {% endif %}

                                            </div>
                                        </div>

{#                                            <div class="clearfix"></div>#}
                                    </div>
                                        <!-- list-main-wrap end-->

                                    <!-- sidebar filters -->
                                <form action="{% url 'searchresults' %}" method="GET">
                                    <div class="col-md-4">
                                        <div class="fl-wrap">
                                            <!-- listsearch-input-wrap  -->
                                            <div class="listsearch-input-wrap fl-wrap">
                                                <div class="listsearch-input-item">
                                                    <i class="mbri-key single-i"></i>
                                                    <input type="text"  value="{{ keyword }}" name="keyword"/>
                                                </div>
                                                <div class="listsearch-input-item">
                                                    <input type="text"  value="{{ city }}" name="city"/>
                                                </div>
                                                <div class="listsearch-input-item">
                                                    <input type="text" {{ name }} value="" name="title"/>
                                                </div>

{#                                                <div class="listsearch-input-text" id="autocomplete-container">#}
{#													<label><i class="mbri-map-pin"></i> Enter Address </label>#}
{#													<input type="text" placeholder="Destination , Area , Street" id="autocomplete-input" class="qodef-archive-places-search" value=""/>#}
{#													<a  href="#"  class="loc-act qodef-archive-current-location"><i class="fa fa-dot-circle-o"></i></a>#}
{#												</div>#}
{#                                                <div class="distance-input fl-wrap">#}
{#                                                    <div class="distance-title"> Radius around selected destination <span></span> km</div>#}
{#                                                    <div class="distance-radius-wrap fl-wrap">#}
{#                                                        <input class="distance-radius rangeslider--horizontal" type="range" min="1" max="100" step="1" value="1" data-title="Radius around selected destination">#}
{#                                                    </div>#}
{#                                                </div>#}
                                                <!-- Checkboxes -->
{#                                                <div class=" fl-wrap filter-tags">#}
{#                                                    <h4>Filter by Tags</h4>#}
{#                                                    <div class="filter-tags-wrap">#}
{#                                                        <input id="check-a" type="checkbox" name="check">#}
{#                                                        <label for="check-a">Elevator in building</label>#}
{#                                                    </div>#}
{#                                                    <div class="filter-tags-wrap">#}
{#                                                        <input id="check-b" type="checkbox" name="check">#}
{#                                                        <label for="check-b">Friendly workspace</label>#}
{#                                                    </div>#}
{#                                                    <div class="filter-tags-wrap">#}
{#                                                        <input id="check-c" type="checkbox" name="check">#}
{#                                                        <label for="check-c">Instant Book</label>#}
{#                                                    </div>#}
{#                                                    <div class="filter-tags-wrap">#}
{#                                                        <input id="check-d" type="checkbox" name="check">#}
{#                                                        <label for="check-d">Wireless Internet</label>#}
{#                                                    </div>#}
{#                                                </div>#}
                                                <!-- hidden-listing-filter end -->
                                                <button type="submit" class="button fs-map-btn">Update</button>
                                            </div>
                                            <!-- listsearch-input-wrap end -->
                                        </div>
                                    </div>

                                {% csrf_token %}

                                </form>
                                    <!-- sidebar filters end -->
                                </div>
                            </div>

                        </div>

                    </section>
                    <!-- section end -->
                    <div class="limit-box fl-wrap"></div>

                </div>
                <!-- content end -->
    </div>

<!-- wrapper end -->






<script type="text/javascript" src="/static/js/jquery.min.js"></script>
<script type="text/javascript" src="/static/js/plugins.js"></script>
<script type="text/javascript" src="/static/js/scripts.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDOY0BgYeqFgDSW8twkBXUsSbmxIDzmGEA&callback=initMap"></script>

<script type="text/javascript" src="/static/js/map_infobox.js"></script>
<script type="text/javascript" src="/static/js/markerclusterer.js"></script>
{#    <script type="text/javascript" src="/static/js/maps.js">#}

{#</script>#}

{#<script>#}
{##}
{##}
{#(function ($) {#}
{#    "use strict";#}
{#    var markerIcon = {#}
{#        anchor: new google.maps.Point(22, 16),#}
{#        url: 'images/marker.png',#}
{#    }#}
{##}
{#    function mainMap() {#}
{#        function locationData(locationURL, locationCategory, locationImg, locationTitle, locationAddress, locationPhone, locationStarRating, locationRevievsCounter) {#}
{#            return ('<div class="map-popup-wrap"><div class="map-popup"><div class="infoBox-close"><i class="fa fa-times"></i></div><div class="map-popup-category">' + locationCategory + '</div><a href="' + locationURL + '" class="listing-img-content fl-wrap"><img src="' + locationImg + '" alt=""></a> <div class="listing-content fl-wrap"><div class="card-popup-raining map-card-rainting" data-staRrating="' + locationStarRating + '"><span class="map-popup-reviews-count">( ' + locationRevievsCounter + ' reviews )</span></div><div class="listing-title fl-wrap"><h4><a href=' + locationURL + '>' + locationTitle + '</a></h4><span class="map-popup-location-info"><i class="fa fa-map-marker"></i>' + locationAddress + '</span><span class="map-popup-location-phone"><i class="fa fa-phone"></i>' + locationPhone + '</span></div></div></div></div>')#}
{#        }#}
{#        // var locations = [#}
{#        //     [locationData('listing-single2.html', 'Food and Drink', 'images/all/8.jpg', 'Luxury Restourant', "1327 Intervale Ave, Bronx, NY ", "+38099231212", "5", "27"), 40.72956781, -73.99726866, 0, markerIcon],#}
{#        //     [locationData('listing-single.html', 'Conference and Events', 'images/all/1.jpg', 'Event In City Mol', "W 85th St, New York, NY ", "+38099231212", "4", "5"), 40.76221766, -73.96511769, 1, markerIcon],#}
{#        //     [locationData('listing-single.html', 'Food and Drink', 'images/all/4.jpg', 'Luxury Restourant', "40 Journal Square Plaza, Jersey City, NJ", "+38099231212", "4", "5"), 40.88496706, -73.88191222, 2, markerIcon],#}
{#        //     [locationData('listing-single.html', 'Gym - Fitness', 'images/all/20.jpg', 'Gym in the Center', "75 Prince St, New York, NY ", "+38099231212", "4", "127"), 40.72228267, -73.99246214, 3, markerIcon],#}
{#        //     [locationData('listing-single.html', 'Shop - Store', 'images/all/5.jpg', 'Shop in Boutique Zone', "34-42 Montgomery St, New York, NY", "+38099231212", "5", "43"), 40.94982541, -73.84357452, 4, markerIcon],#}
{#        //     [locationData('listing-single.html', 'Hotels', 'images/all/23.jpg', 'Luxary Hotel', "70 Bright St, Jersey City, NJ", "+38099231212", "4", "7"), 40.90261483, -74.15737152, 5, markerIcon],#}
{#        //     [locationData('listing-single.html', 'Shop - Store', 'images/all/6.jpg', 'Shop In City Mol', "123 School St. Lynchburg, NY ", "+38099231212", "3", "4"), 40.79145927, -74.08252716, 6, markerIcon],#}
{#        //     [locationData('listing-single2.html', 'Hotels', 'images/all/22.jpg', 'Fancy Hotel', "Mt Carmel Pl, New York, NY", "+38099231212", "5", "3"), 40.58423508, -73.96099091, 7, markerIcon],#}
{#        //     [locationData('listing-single2.html', 'Hotels', 'images/all/7.jpg', 'Luxary Hotel-Spa', "1-30 Hunters Point Ave, Long Island City, NY", "+38099231212", "5", "12"), 40.58110616, -73.97678375, 8, markerIcon],#}
{#        //     [locationData('listing-single3.html', 'Conference and Events', 'images/all/16.jpg', 'Web Design Event ', "726-1728 2nd Ave, New York, NY", "+38099231212", "5", "17"), 40.73112881, -74.07897948, 9, markerIcon],#}
{#        //     [locationData('listing-single3.html', 'Gym - Fitness', 'images/all/3.jpg', 'Gym in the Center', "9443 Fairview Ave, North Bergen, NJ", "+38099231212", "4", "11"), 40.67386831, -74.10438536, 10, markerIcon],#}
{#        // ];#}
{##}
{##}
{#        var lat={{ lat }};#}
{#        var long={{ long }};#}
{##}
{#        var map = new google.maps.Map(document.getElementById('map-main'), {#}
{#            zoom: 9,#}
{#            scrollwheel: false,#}
{#            center: new google.maps.LatLng(lat, long),#}
{#            mapTypeId: google.maps.MapTypeId.ROADMAP,#}
{#            zoomControl: false,#}
{#            mapTypeControl: false,#}
{#            scaleControl: false,#}
{#            panControl: false,#}
{#            fullscreenControl: false,#}
{#            navigationControl: false,#}
{#            streetViewControl: false,#}
{#            animation: google.maps.Animation.BOUNCE,#}
{#            gestureHandling: 'cooperative',#}
{#            styles: [{#}
{#                "featureType": "administrative",#}
{#                "elementType": "labels.text.fill",#}
{#                "stylers": [{#}
{#                    "color": "#444444"#}
{#                }]#}
{#            }]#}
{#        });#}
{##}
{##}
{#        var boxText = document.createElement("div");#}
{#        boxText.className = 'map-box'#}
{#        var currentInfobox;#}
{#        var boxOptions = {#}
{#            content: boxText,#}
{#            disableAutoPan: true,#}
{#            alignBottom: true,#}
{#            maxWidth: 0,#}
{#            pixelOffset: new google.maps.Size(-145, -45),#}
{#            zIndex: null,#}
{#            boxStyle: {#}
{#                width: "260px"#}
{#            },#}
{#            closeBoxMargin: "0",#}
{#            closeBoxURL: "",#}
{#            infoBoxClearance: new google.maps.Size(1, 1),#}
{#            isHidden: false,#}
{#            pane: "floatPane",#}
{#            enableEventPropagation: false,#}
{#        };#}
{#        var markerCluster, marker, i;#}
{#        var allMarkers = [];#}
{#        var clusterStyles = [{#}
{#            textColor: 'white',#}
{#            url: '',#}
{#            height: 50,#}
{#            width: 50#}
{#        }];#}
{##}
{#        var prev_locs={{ events_json }};#}
{##}
{#        var locations=[];#}
{##}
{##}
{#        for (i = 0; i < prev_locs.length; i++){#}
{##}
{#            locations.push([locationData(prev_locs[i][0],prev_locs[i][1],prev_locs[i][2],prev_locs[i][3],#}
{#                prev_locs[i][4],prev_locs[i][5],prev_locs[i][6],prev_locs[i][7]),prev_locs[i][8],#}
{#                prev_locs[i][9],0,markerIcon])#}
{##}
{##}
{#        }#}
{##}
{#        console.log(locations);#}
{##}
{##}
{##}
{#        for (i = 0; i < locations.length; i++) {#}
{#            marker = new google.maps.Marker({#}
{#                position: new google.maps.LatLng(locations[i][1], locations[i][2]),#}
{#                icon: locations[i][4],#}
{#                id: i#}
{#            });#}
{#            allMarkers.push(marker);#}
{#            var ib = new InfoBox();#}
{#            google.maps.event.addListener(ib, "domready", function () {#}
{#                cardRaining()#}
{#            });#}
{#            google.maps.event.addListener(marker, 'click', (function (marker, i) {#}
{#                return function () {#}
{#                    ib.setOptions(boxOptions);#}
{#                    boxText.innerHTML = locations[i][0];#}
{#                    ib.close();#}
{#                    ib.open(map, marker);#}
{#                    currentInfobox = marker.id;#}
{#                    var latLng = new google.maps.LatLng(locations[i][1], locations[i][2]);#}
{#                    map.panTo(latLng);#}
{#                    map.panBy(0, -180);#}
{#                    google.maps.event.addListener(ib, 'domready', function () {#}
{#                        $('.infoBox-close').click(function (e) {#}
{#                            e.preventDefault();#}
{#                            ib.close();#}
{#                        });#}
{#                    });#}
{#                }#}
{#            })(marker, i));#}
{#        }#}
{#        var options = {#}
{#            imagePath: 'images/',#}
{#            styles: clusterStyles,#}
{#            minClusterSize: 2#}
{#        };#}
{#        markerCluster = new MarkerClusterer(map, allMarkers, options);#}
{#        google.maps.event.addDomListener(window, "resize", function () {#}
{#            var center = map.getCenter();#}
{#            google.maps.event.trigger(map, "resize");#}
{#            map.setCenter(center);#}
{#        });#}
{##}
{#        $('.nextmap-nav').click(function (e) {#}
{#            e.preventDefault();#}
{#            map.setZoom(15);#}
{#            var index = currentInfobox;#}
{#            if (index + 1 < allMarkers.length) {#}
{#                google.maps.event.trigger(allMarkers[index + 1], 'click');#}
{#            } else {#}
{#                google.maps.event.trigger(allMarkers[0], 'click');#}
{#            }#}
{#        });#}
{#        $('.prevmap-nav').click(function (e) {#}
{#            e.preventDefault();#}
{#            map.setZoom(15);#}
{#            if (typeof (currentInfobox) == "undefined") {#}
{#                google.maps.event.trigger(allMarkers[allMarkers.length - 1], 'click');#}
{#            } else {#}
{#                var index = currentInfobox;#}
{#                if (index - 1 < 0) {#}
{#                    google.maps.event.trigger(allMarkers[allMarkers.length - 1], 'click');#}
{#                } else {#}
{#                    google.maps.event.trigger(allMarkers[index - 1], 'click');#}
{#                }#}
{#            }#}
{#        });#}
{#        $('.map-item').click(function (e) {#}
{#            e.preventDefault();#}
{#     		map.setZoom(15);#}
{#            var index = currentInfobox;#}
{#            var marker_index = parseInt($(this).attr('href').split('#')[1], 10);#}
{#            google.maps.event.trigger(allMarkers[marker_index], "click");#}
{#			if ($(this).hasClass("scroll-top-map")){#}
{#			  $('html, body').animate({#}
{#				scrollTop: $(".map-container").offset().top+ "-80px"#}
{#			  }, 500)#}
{#			}#}
{#			else if ($(window).width()<1064){#}
{#			  $('html, body').animate({#}
{#				scrollTop: $(".map-container").offset().top+ "-80px"#}
{#			  }, 500)#}
{#			}#}
{#        });#}
{#        var zoomControlDiv = document.createElement('div');#}
{#        var zoomControl = new ZoomControl(zoomControlDiv, map);#}
{##}
{#        function ZoomControl(controlDiv, map) {#}
{#            zoomControlDiv.index = 1;#}
{#            map.controls[google.maps.ControlPosition.RIGHT_CENTER].push(zoomControlDiv);#}
{#            controlDiv.style.padding = '5px';#}
{#            var controlWrapper = document.createElement('div');#}
{#            controlDiv.appendChild(controlWrapper);#}
{#            var zoomInButton = document.createElement('div');#}
{#            zoomInButton.className = "mapzoom-in";#}
{#            controlWrapper.appendChild(zoomInButton);#}
{#            var zoomOutButton = document.createElement('div');#}
{#            zoomOutButton.className = "mapzoom-out";#}
{#            controlWrapper.appendChild(zoomOutButton);#}
{#            google.maps.event.addDomListener(zoomInButton, 'click', function () {#}
{#                map.setZoom(map.getZoom() + 1);#}
{#            });#}
{#            google.maps.event.addDomListener(zoomOutButton, 'click', function () {#}
{#                map.setZoom(map.getZoom() - 1);#}
{#            });#}
{#        }#}
{##}
{##}
{#    }#}
{#    var map = document.getElementById('map-main');#}
{#    if (typeof (map) != 'undefined' && map != null) {#}
{#        google.maps.event.addDomListener(window, 'load', mainMap);#}
{#    }#}
{##}
{#    function singleMap() {#}
{#        var myLatLng = {#}
{#            lng: $('#singleMap').data('longitude'),#}
{#            lat: $('#singleMap').data('latitude'),#}
{#        };#}
{#        var single_map = new google.maps.Map(document.getElementById('singleMap'), {#}
{#            zoom: 14,#}
{#            center: myLatLng,#}
{#            scrollwheel: false,#}
{#            zoomControl: false,#}
{#            mapTypeControl: false,#}
{#            scaleControl: false,#}
{#            panControl: false,#}
{#            navigationControl: false,#}
{#            streetViewControl: false,#}
{#            styles: [{#}
{#                "featureType": "landscape",#}
{#                "elementType": "all",#}
{#                "stylers": [{#}
{#                    "color": "#f2f2f2"#}
{#                }]#}
{#            }]#}
{#        });#}
{#        var marker = new google.maps.Marker({#}
{#            position: myLatLng,#}
{#            map: single_map,#}
{#            icon: markerIcon,#}
{#            title: 'Our Location'#}
{#        });#}
{#        var zoomControlDiv = document.createElement('div');#}
{#        var zoomControl = new ZoomControl(zoomControlDiv, single_map);#}
{##}
{#        function ZoomControl(controlDiv, single_map) {#}
{#            zoomControlDiv.index = 1;#}
{#            single_map.controls[google.maps.ControlPosition.RIGHT_CENTER].push(zoomControlDiv);#}
{#            controlDiv.style.padding = '5px';#}
{#            var controlWrapper = document.createElement('div');#}
{#            controlDiv.appendChild(controlWrapper);#}
{#            var zoomInButton = document.createElement('div');#}
{#            zoomInButton.className = "mapzoom-in";#}
{#            controlWrapper.appendChild(zoomInButton);#}
{#            var zoomOutButton = document.createElement('div');#}
{#            zoomOutButton.className = "mapzoom-out";#}
{#            controlWrapper.appendChild(zoomOutButton);#}
{#            google.maps.event.addDomListener(zoomInButton, 'click', function () {#}
{#                single_map.setZoom(single_map.getZoom() + 1);#}
{#            });#}
{#            google.maps.event.addDomListener(zoomOutButton, 'click', function () {#}
{#                single_map.setZoom(single_map.getZoom() - 1);#}
{#            });#}
{#        }#}
{#    }#}
{#    var single_map = document.getElementById('singleMap');#}
{#    if (typeof (single_map) != 'undefined' && single_map != null) {#}
{#        google.maps.event.addDomListener(window, 'load', singleMap);#}
{#    }#}
{#})(this.jQuery);#}
{#</script>#}





{% endblock %}
